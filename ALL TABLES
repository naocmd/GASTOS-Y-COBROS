CREATE SCHEMA PRESUPUESTO_PERSONAL;
USE PRESUPUESTO_PERSONAL;

CREATE TABLE EMPRESAS (
    ID_EMPRESA INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE_EMPRESA VARCHAR(100) NOT NULL,
    CONSTRAINT UQ_EMPRESA_NOMBRE UNIQUE (NOMBRE_EMPRESA)
);

CREATE TABLE FUENTEINGRESOS (
ID_INGRESO INT PRIMARY KEY AUTO_INCREMENT,
NOMBREINGRESO VARCHAR(50) NOT NULL,
TIPOFUENTE VARCHAR(20),
CONSTRAINT CK_TIPOFUENTE CHECK (TIPOFUENTE IN ('FIJO', 'EXTRA'))
);

CREATE TABLE CATEGORIA (
ID_CATEGORIA INT PRIMARY KEY AUTO_INCREMENT,
NOMBRE_CATEGORIA VARCHAR(50) NOT NULL,
CONSTRAINT UQ_NOMBRE_CATEGORIA UNIQUE (NOMBRE_CATEGORIA)
);

CREATE TABLE GASTOS (
ID_GASTOS INT AUTO_INCREMENT PRIMARY KEY,
ID_EMPRESA INT NOT NULL,
FECHA DATE NOT NULL,
ID_CATEGORIA INT NOT NULL,
CONCEPTO VARCHAR(100),
IMPORTE DECIMAL(8,2) NOT NULL,
METODOPAGO VARCHAR(20),
TIPOGASTO VARCHAR(20),
CONSTRAINT FK_ID_EMPRESA_GASTOS FOREIGN KEY (ID_EMPRESA) REFERENCES EMPRESAS(ID_EMPRESA),
CONSTRAINT FK_GASTOS_CATEGORIA FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA(ID_CATEGORIA),
CONSTRAINT CK_TIPOGASTO CHECK (TIPOGASTO IN ('FIJO', 'VARIABLE')),
CONSTRAINT CK_METODOPAGO CHECK (METODOPAGO IN ('EFECTIVO', 'TARJETA'))
);

CREATE TABLE INGRESOS (
ID_INGRESO INT AUTO_INCREMENT PRIMARY KEY,
ID_EMPRESA INT NOT NULL,
FECHA DATE NOT NULL,
ID_FUENTEINGRESO INT NOT NULL,
CONCEPTO VARCHAR(100),
IMPORTE DECIMAL (8,2) NOT NULL,
METODOPAGO VARCHAR(20),
TIPOPAGO VARCHAR (20),
CONSTRAINT FK_ID_EMPRESA_INGRESOS FOREIGN KEY (ID_EMPRESA) REFERENCES EMPRESAS(ID_EMPRESA),
CONSTRAINT FK_FUENTEINGRESOS_INGRESOS FOREIGN KEY (ID_FUENTEINGRESO) REFERENCES FUENTEINGRESOS(ID_INGRESO),
CONSTRAINT CK_TIPOPAGO CHECK (TIPOPAGO IN ('FIJO', 'VARIABLE')),
CONSTRAINT CK_METODOPAGO_INGRESOS CHECK (METODOPAGO IN ('EFECTIVO', 'TARJETA'))
);

CREATE TABLE PRESUPUESTO (
FECHA DATE NOT NULL,
ID_EMPRESA INT NOT NULL,
ID_CATEGORIA INT NOT NULL,
PRESUPUESTOMENSUAL DECIMAL(8,2),
CONSTRAINT FK_ID_EMPRESA_PRESUPUESTO FOREIGN KEY (ID_EMPRESA) REFERENCES EMPRESAS(ID_EMPRESA),
CONSTRAINT FK_ID_CATEGORIA_PRESUPUESTO FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA(ID_CATEGORIA)
);



